## Overview
Core provides shared configuration, TLS-aware HTTP clients, JetStream orchestration, and the generic worker runtime. The abstractions are helpful, but a few choices currently cap scalability or make deployments brittle.

## Critical
- **TLS client builder still requires a CA bundle even when TLS is effectively disabled** – `TlsConfig::from_env` always populates `ca_cert_path` (defaulting to `/app/certs/ca-bundle.crt`) and `http_client::build_client` immediately loads that path. In clusters that rely on the system trust store and do not mount a custom bundle, this call fails outright. See [crates/core/src/config.rs#L369-L402](crates/core/src/config.rs#L369-L402) and [crates/core/src/http_client.rs#L126-L149](crates/core/src/http_client.rs#L126-L149). Make the CA override optional and fall back to native roots when the file is missing.

## High
- **JetStream drift detection ignores retention tuning** – `stream_config_differs` checks only name, subjects, retention policy, and replica count, so updates to `max_age`, `max_messages`, or `duplicate_window` are silently skipped (the stream stays stale). See [crates/core/src/nats.rs#L151-L156](crates/core/src/nats.rs#L151-L156). Compare the current config with the desired config holistically or explicitly include the other fields before calling `update_stream`.
- **Worker backpressure defers work for entire ack_wait windows** – When the semaphore is saturated, `process_messages` simply `continue`s without acking. That leaves the message pending until JetStream times out (10 minutes for most consumers) before redelivery, tanking throughput under load. See [crates/core/src/worker.rs#L229-L238](crates/core/src/worker.rs#L229-L238) together with the 600s `ack_wait` in [crates/core/src/nats.rs#L159-L188](crates/core/src/nats.rs#L159-L188). Prefer fetching fewer messages, using `acquire_owned` with `await`, or `Nak` with a short delay so saturation recovers quickly.

## Medium
- **Config loader forces static AWS keys** – `S3Config::from_env` requires `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`, preventing IAM roles or external credential providers. See [crates/core/src/config.rs#L262-L277](crates/core/src/config.rs#L262-L277). Allow optional keys and default to the SDK chain so managed identities work when running in EKS/ECS.
- **Worker runtime double-initializes NATS** – `worker::run_worker` opens a new connection and re-runs `initialize_jetstream` even though each worker binary already connected to NATS to build its context. See [crates/core/src/worker.rs#L163-L190](crates/core/src/worker.rs#L163-L190). While mostly redundant, the duplicate connections consume sockets and can confuse TLS/mTLS setups; consider accepting a prebuilt client instead.
