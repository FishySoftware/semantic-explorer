# ================================
# PostgreSQL Database Configuration
# ================================
DATABASE_URL=postgresql://semantic_explorer_user:semantic_explorer_password@localhost:5432/semantic_explorer

# Database Connection Pool Configuration (optional - uses sensible defaults)
DB_MAX_CONNECTIONS=15
DB_MIN_CONNECTIONS=2
DB_ACQUIRE_TIMEOUT_SECS=30
DB_IDLE_TIMEOUT_SECS=300
DB_MAX_LIFETIME_SECS=1800

# ================================
# ================================

# ================================
# Qdrant Vector Database Configuration
# ================================
QDRANT_URL=http://localhost:6334
QDRANT_API_KEY=
QDRANT_TIMEOUT_SECS=30
QDRANT_CONNECT_TIMEOUT_SECS=10
QDRANT_QUANTIZATION_TYPE=none  # Options: none, scalar, product
QDRANT_QUANTIZATION_SCALAR_ENABLED=false
QDRANT_QUANTIZATION_PRODUCT_ENABLED=false

# ================================
# NATS JetStream Configuration
# ================================
NATS_URL=nats://localhost:4222
# NATS_REPLICAS=3  # Optional: Number of replicas for JetStream streams (default: 3)
                   # Should match your NATS cluster size for HA deployments

# ================================
# OIDC/Authentication Configuration (Dex)
# ================================
OIDC_CLIENT_ID=semantic-explorer-client
OIDC_CLIENT_SECRET=your-secret-here
OIDC_ISSUER_URL=http://localhost:5556
OIDC_USE_PKCE=false

# Session Management Configuration
OIDC_SESSION_MANAGEMENT_ENABLED=true
OIDC_SESSION_TIMEOUT_SECS=3600          # 1 hour default
OIDC_INACTIVITY_TIMEOUT_SECS=1800       # 30 minutes default
OIDC_MAX_CONCURRENT_SESSIONS=5
OIDC_REFRESH_TOKEN_ROTATION_ENABLED=true

# ================================
# Encryption Configuration
# ================================
# Optional - leave empty to disable encryption for testing
# Generate a key with: openssl rand -hex 32
ENCRYPTION_MASTER_KEY=

# ================================
# AWS S3 Configuration (for file storage)
# ================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_ENDPOINT_URL=  # Leave empty for AWS, use minio URL for local (e.g., http://minio:9000)
S3_BUCKET_NAME=semantic-explorer-files

# S3 File Size Limits (in bytes)
# These limits prevent memory exhaustion and DoS attacks
S3_MAX_DOWNLOAD_SIZE_BYTES=104857600   # 100MB default - max file size for API downloads
S3_MAX_UPLOAD_SIZE_BYTES=1073741824    # 1GB default - max file size for uploads (matches multipart form limit)

# ================================
# API Server Configuration
# ================================
SERVICE_NAME=semantic-explorer-api
HOSTNAME=localhost
PORT=8000
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
STATIC_FILES_DIR=../semantic-explorer-ui/dist
SHUTDOWN_TIMEOUT_SECS=30

# ================================
# Inference API Configuration
# ================================
# Embedding Inference API - GPU-accelerated embeddings and reranking
EMBEDDING_INFERENCE_API_URL=http://localhost:8090
EMBEDDING_INFERENCE_API_TIMEOUT_SECS=120

# LLM Inference API - GPU-accelerated text generation
LLM_INFERENCE_API_URL=http://localhost:8091
LLM_INFERENCE_API_TIMEOUT_SECS=120

# ================================
# TLS/SSL Configuration
# ================================
# Optional - only needed if using TLS
SERVER_SSL_ENABLED=false
CLIENT_MTLS_ENABLED=false
TLS_CA_CERT_PATH=/app/certs/ca-bundle.crt
TLS_SERVER_CERT_PATH=/app/certs/server.crt
TLS_SERVER_KEY_PATH=/app/certs/server.key
TLS_CLIENT_CERT_PATH=/app/certs/client.crt
TLS_CLIENT_KEY_PATH=/app/certs/client.key

# ================================
# Observability & Monitoring
# ================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
LOG_FORMAT=json  # Options: json, pretty
RUST_LOG=semantic_explorer=debug,actix_web=info
