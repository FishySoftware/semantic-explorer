# ================================
# PostgreSQL Database Configuration
# ================================
DATABASE_URL=postgresql://semantic_explorer_user:semantic_explorer_password@localhost:5432/semantic_explorer

# Database Connection Pool Configuration (optional - uses sensible defaults)
DB_MAX_CONNECTIONS=15
DB_MIN_CONNECTIONS=2
DB_ACQUIRE_TIMEOUT_SECS=30
DB_IDLE_TIMEOUT_SECS=300
DB_MAX_LIFETIME_SECS=1800

# ================================
# Redis Cluster Configuration
# ================================
REDIS_CLUSTER_NODES=redis-node-1:6379,redis-node-2:6379,redis-node-3:6379,redis-node-4:6379,redis-node-5:6379,redis-node-6:6379
REDIS_POOL_SIZE=10
REDIS_CONNECT_TIMEOUT_SECS=5

# ================================
# Qdrant Vector Database Configuration
# ================================
QDRANT_URL=http://localhost:6334
QDRANT_API_KEY=
QDRANT_TIMEOUT_SECS=30
QDRANT_CONNECT_TIMEOUT_SECS=10
QDRANT_QUANTIZATION_TYPE=none  # Options: none, scalar, product
QDRANT_QUANTIZATION_SCALAR_ENABLED=false
QDRANT_QUANTIZATION_PRODUCT_ENABLED=false

# ================================
# NATS JetStream Configuration
# ================================
NATS_URL=nats://localhost:4222
# NATS_REPLICAS=3  # Optional: Number of replicas for JetStream streams (default: 3)
                   # Should match your NATS cluster size for HA deployments

# ================================
# OIDC/Authentication Configuration (Dex)
# ================================
OIDC_CLIENT_ID=semantic-explorer-client
OIDC_CLIENT_SECRET=your-secret-here
OIDC_ISSUER_URL=http://localhost:5556
OIDC_USE_PKCE=false

# Session Management Configuration
OIDC_SESSION_MANAGEMENT_ENABLED=true
OIDC_SESSION_TIMEOUT_SECS=3600          # 1 hour default
OIDC_INACTIVITY_TIMEOUT_SECS=1800       # 30 minutes default
OIDC_MAX_CONCURRENT_SESSIONS=5
OIDC_REFRESH_TOKEN_ROTATION_ENABLED=true

# ================================
# Encryption Configuration
# ================================
# Optional - leave empty to disable encryption for testing
# Generate a key with: openssl rand -hex 32
ENCRYPTION_MASTER_KEY=

# ================================
# AWS S3 Configuration (for file storage)
# ================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_ENDPOINT_URL=  # Leave empty for AWS, use minio URL for local (e.g., http://minio:9000)
S3_BUCKET_NAME=semantic-explorer-files

# Optional - for development/testing
MAX_FILE_SIZE_MB=100

# ================================
# API Server Configuration
# ================================
SERVICE_NAME=semantic-explorer-api
HOSTNAME=localhost
PORT=8000
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000
STATIC_FILES_DIR=../semantic-explorer-ui/dist
SHUTDOWN_TIMEOUT_SECS=30

# ================================
# Rate Limiting Configuration
# ================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_SEARCH_REQUESTS_PER_MINUTE=600
RATE_LIMIT_CHAT_REQUESTS_PER_MINUTE=200
RATE_LIMIT_TRANSFORM_REQUESTS_PER_MINUTE=100
RATE_LIMIT_TEST_REQUESTS_PER_MINUTE=100

# ================================
# TLS/SSL Configuration
# ================================
# Optional - only needed if using TLS
SERVER_SSL_ENABLED=false
CLIENT_MTLS_ENABLED=false
TLS_CA_CERT_PATH=/app/certs/ca-bundle.crt
TLS_SERVER_CERT_PATH=/app/certs/server.crt
TLS_SERVER_KEY_PATH=/app/certs/server.key
TLS_CLIENT_CERT_PATH=/app/certs/client.crt
TLS_CLIENT_KEY_PATH=/app/certs/client.key

# ================================
# Observability & Monitoring
# ================================
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
LOG_FORMAT=json  # Options: json, pretty
RUST_LOG=semantic_explorer=debug,actix_web=info
