# Development Environment - All Services Included
# This values file includes all dependencies for development/testing
# Use with: helm install semantic-explorer . -f examples/values-all-included-dev.yaml

global:
  environment: development
  # Init container image for startup ordering
  initContainer:
    image: "busybox:1.36"

# API Service - Development
api:
  enabled: true
  replicaCount: 1
  image:
    tag: "latest"
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  autoscaling:
    enabled: false
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 15s

# Worker Collections - Development
workerCollections:
  enabled: true
  replicaCount: 1
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 15s

# Worker Datasets - Development
workerDatasets:
  enabled: true
  replicaCount: 1
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 15s

# Worker Visualizations - Development
workerVisualizationsPy:
  enabled: true
  replicaCount: 1
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 2000m
      memory: 2Gi
  autoscaling:
    enabled: false

# PostgreSQL - Development
postgresql:
  enabled: true
  primary:
    resources:
      requests:
        cpu: 250m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 1Gi
    persistence:
      size: 10Gi
  backup:
    enabled: true
    retention: 7
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 30s

  enabled: true

  replicas: 3
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 250m
        memory: 256Mi
  sentinel:
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi

# NATS - Development (JetStream enabled)
nats:
  enabled: true
  config:
    cluster:
      enabled: true
      replicas: 3
    jetstream:
      enabled: true
      fileStore:
        maxSize: 10Gi
  resources:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 1Gi
  persistence:
    size: 10Gi
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 30s

# Qdrant - Development (Vector Database)
qdrant:
  enabled: true
  replicaCount: 1
  persistence:
    size: 20Gi
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 2Gi
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      interval: 30s

# MinIO - Development (S3-compatible)
minio:
  enabled: true
  mode: standalone
  replicas: 1
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  persistence:
    size: 20Gi
  # Auto-create buckets for application and Quickwit
  buckets:
    - name: semantic-explorer-files
      policy: none
      purge: false
    - name: quickwit
      policy: none
      purge: false

# Dex - OIDC Provider
dex:
  enabled: true
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

# Observability Stack - Development
observability:
  # OpenTelemetry Collector
  otelCollector:
    enabled: true
    config:
      receivers:
        otlp:
          protocols:
            grpc:
              endpoint: 0.0.0.0:4317
              max_recv_msg_size_mib: 100
            http:
              endpoint: 0.0.0.0:4318
    resources:
      requests:
        cpu: 100m
        memory: 256Mi
      limits:
        cpu: 500m
        memory: 512Mi

  # Prometheus internal config
  prometheus:
    enabled: true  # Use Prometheus subchart for metrics storage
    external:
      enabled: false

  # Quickwit - Log & Trace Aggregation (S3 backend via MinIO)
  quickwit:
    enabled: true
    replicaCount: 1
    storage:
      bucketName: "quickwit"
    config:
      enableOtlpEndpoint: true
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 2Gi
    persistence:
      size: 20Gi
    metrics:
      enabled: true
      serviceMonitor:
        enabled: true
        interval: 30s

# Prometheus subchart configuration - Development
prometheus:
  enabled: true
  alertmanager:
    enabled: false
  prometheus-pushgateway:
    enabled: false
  prometheus-node-exporter:
    enabled: false
  kube-state-metrics:
    enabled: false
  server:
    retention: "7d"
    persistentVolume:
      enabled: true
      size: 20Gi
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 1000m
        memory: 1Gi

# Grafana subchart configuration - Development
grafana:
  enabled: true
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      labelValue: "1"
    datasources:
      enabled: true
      label: grafana_datasource
      labelValue: "1"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  persistence:
    enabled: true
    size: 5Gi

# Network Policy
networkPolicy:
  enabled: true
  ingress:
    fromIngress: true
  egress:
    toDns: true
    toInternet: true
